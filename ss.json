{
  "info": {
    "name": "Arduino Alert Monitor API",
    "description": "API Ð´Ð»Ñ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð° Ð¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ñ‚Ñ€ÐµÐ²Ð¾Ð³Ð°Ð¼Ð¸ Arduino Security System",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    },
    {
      "key": "access_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "alert_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "device_id",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "ðŸš¨ Alert Monitor Dashboard",
      "item": [
        {
          "name": "Get All Alerts (Monitor View)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const alerts = pm.response.json();",
                  "    console.log(`Found ${alerts.length} alerts`);",
                  "    if (alerts.length > 0) {",
                  "        pm.collectionVariables.set('alert_id', alerts[0].id);",
                  "        console.log('First alert ID saved:', alerts[0].id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/monitor/alerts/",
              "host": ["{{base_url}}"],
              "path": ["monitor", "alerts", ""],
              "query": [
                {
                  "key": "limit",
                  "value": "50",
                  "description": "ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ñ‚Ñ€ÐµÐ²Ð¾Ð³",
                  "disabled": true
                }
              ]
            },
            "description": "ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ñ‚Ñ€ÐµÐ²Ð¾Ð³Ð¸ Ñ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ð¾Ð¹ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÐµÐ¹ Ð´Ð»Ñ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°"
          },
          "response": []
        },
        {
          "name": "Get Unacknowledged Alerts Only",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/monitor/alerts/?acknowledged=false&limit=20",
              "host": ["{{base_url}}"],
              "path": ["monitor", "alerts", ""],
              "query": [
                {
                  "key": "acknowledged",
                  "value": "false"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            },
            "description": "ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½ÐµÐ¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð½Ñ‹Ðµ Ñ‚Ñ€ÐµÐ²Ð¾Ð³Ð¸"
          },
          "response": []
        },
        {
          "name": "Filter Alerts by Type - Motion",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/monitor/alerts/?type=motion",
              "host": ["{{base_url}}"],
              "path": ["monitor", "alerts", ""],
              "query": [
                {
                  "key": "type",
                  "value": "motion"
                }
              ]
            },
            "description": "Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ð¿Ð¾ Ñ‚Ð¸Ð¿Ñƒ Ñ‚Ñ€ÐµÐ²Ð¾Ð³Ð¸ - Ð¾Ð±Ð½Ð°Ñ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ"
          },
          "response": []
        },
        {
          "name": "Filter Alerts by Type - Panic",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/monitor/alerts/?type=panic",
              "host": ["{{base_url}}"],
              "path": ["monitor", "alerts", ""],
              "query": [
                {
                  "key": "type",
                  "value": "panic"
                }
              ]
            },
            "description": "Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ð¿Ð¾ Ñ‚Ð¸Ð¿Ñƒ Ñ‚Ñ€ÐµÐ²Ð¾Ð³Ð¸ - Ð¿Ð°Ð½Ð¸Ñ‡ÐµÑÐºÐ°Ñ ÐºÐ½Ð¾Ð¿ÐºÐ°"
          },
          "response": []
        },
        {
          "name": "Filter Alerts by Device",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/monitor/alerts/?device_id={{device_id}}",
              "host": ["{{base_url}}"],
              "path": ["monitor", "alerts", ""],
              "query": [
                {
                  "key": "device_id",
                  "value": "{{device_id}}"
                }
              ]
            },
            "description": "Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ñ‚Ñ€ÐµÐ²Ð¾Ð³ Ð¿Ð¾ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð¼Ñƒ ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð²Ñƒ"
          },
          "response": []
        }
      ]
    },
    {
      "name": "ðŸ“Š Statistics & Analytics",
      "item": [
        {
          "name": "Get Alert Statistics",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/monitor/stats/",
              "host": ["{{base_url}}"],
              "path": ["monitor", "stats", ""]
            },
            "description": "ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð¾Ð±Ñ‰ÑƒÑŽ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÑƒ Ð¿Ð¾ Ñ‚Ñ€ÐµÐ²Ð¾Ð³Ð°Ð¼"
          },
          "response": []
        },
        {
          "name": "Get Active Devices List",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const devices = pm.response.json();",
                  "    console.log(`Found ${devices.length} active devices`);",
                  "    if (devices.length > 0) {",
                  "        pm.collectionVariables.set('device_id', devices[0].id);",
                  "        console.log('First device ID saved:', devices[0].id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/monitor/devices/",
              "host": ["{{base_url}}"],
              "path": ["monitor", "devices", ""]
            },
            "description": "ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ ÑÐ¿Ð¸ÑÐ¾Ðº Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… Arduino ÑƒÑÑ‚Ñ€Ð¾Ð¹ÑÑ‚Ð² Ñ Ð¸Ñ… ÑÑ‚Ð°Ñ‚ÑƒÑÐ¾Ð¼"
          },
          "response": []
        }
      ]
    },
    {
      "name": "ðŸ” Alert Details & Management",
      "item": [
        {
          "name": "Get Alert Details",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/monitor/alerts/{{alert_id}}/",
              "host": ["{{base_url}}"],
              "path": ["monitor", "alerts", "{{alert_id}}", ""]
            },
            "description": "ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð´ÐµÑ‚Ð°Ð»ÑŒÐ½ÑƒÑŽ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ Ð¾ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð¹ Ñ‚Ñ€ÐµÐ²Ð¾Ð³Ðµ"
          },
          "response": []
        },
        {
          "name": "Acknowledge Single Alert",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"is_acknowledged\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/monitor/alerts/{{alert_id}}/",
              "host": ["{{base_url}}"],
              "path": ["monitor", "alerts", "{{alert_id}}", ""]
            },
            "description": "ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚ÑŒ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð¹ Ñ‚Ñ€ÐµÐ²Ð¾Ð³Ð¸"
          },
          "response": []
        },
        {
          "name": "Bulk Acknowledge Alerts",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"alert_ids\": [1, 2, 3, 4, 5]\n}"
            },
            "url": {
              "raw": "{{base_url}}/monitor/alerts/acknowledge/",
              "host": ["{{base_url}}"],
              "path": ["monitor", "alerts", "acknowledge", ""]
            },
            "description": "ÐœÐ°ÑÑÐ¾Ð²Ð¾Ðµ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ðµ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¸Ñ… Ñ‚Ñ€ÐµÐ²Ð¾Ð³ Ð¾Ð´Ð½Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾"
          },
          "response": []
        }
      ]
    },
    {
      "name": "ðŸŽ¯ Real-time Monitoring Scenarios",
      "item": [
        {
          "name": "Dashboard Refresh (All Data)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// ÐšÐ¾Ð¼Ð¿Ð»ÐµÐºÑÐ½Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð´Ð»Ñ Ð´Ð°ÑˆÐ±Ð¾Ñ€Ð´Ð°",
                  "const stats = pm.sendRequest({",
                  "    url: pm.collectionVariables.get('base_url') + '/monitor/stats/',",
                  "    method: 'GET',",
                  "    header: {",
                  "        'Authorization': 'Bearer ' + pm.collectionVariables.get('access_token')",
                  "    }",
                  "}, function (err, response) {",
                  "    if (response.code === 200) {",
                  "        const stats = response.json();",
                  "        console.log('=== DASHBOARD STATS ===');",
                  "        console.log('Total alerts:', stats.total_alerts);",
                  "        console.log('Unacknowledged:', stats.unacknowledged_alerts);",
                  "        console.log('Alerts today:', stats.alerts_today);",
                  "        console.log('Most active device:', stats.most_active_device);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/monitor/alerts/?limit=10",
              "host": ["{{base_url}}"],
              "path": ["monitor", "alerts", ""],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð´Ð»Ñ Ð´Ð°ÑˆÐ±Ð¾Ñ€Ð´Ð° Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°"
          },
          "response": []
        },
        {
          "name": "Emergency Response Check",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/monitor/alerts/?type=panic&acknowledged=false",
              "host": ["{{base_url}}"],
              "path": ["monitor", "alerts", ""],
              "query": [
                {
                  "key": "type",
                  "value": "panic"
                },
                {
                  "key": "acknowledged",
                  "value": "false"
                }
              ]
            },
            "description": "ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð½ÐµÐ¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð½Ñ‹Ñ… ÑÐºÑÑ‚Ñ€ÐµÐ½Ð½Ñ‹Ñ… ÑÐ¸Ð³Ð½Ð°Ð»Ð¾Ð² (Ð¿Ð°Ð½Ð¸ÐºÐ°)"
          },
          "response": []
        },
        {
          "name": "Security Breach Check",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{access_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/monitor/alerts/?type=glass&acknowledged=false",
              "host": ["{{base_url}}"],
              "path": ["monitor", "alerts", ""],
              "query": [
                {
                  "key": "type",
                  "value": "glass"
                },
                {
                  "key": "acknowledged",
                  "value": "false"
                }
              ]
            },
            "description": "ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð½ÐµÐ¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð½Ñ‹Ñ… ÑÐ¸Ð³Ð½Ð°Ð»Ð¾Ð² Ð²Ð·Ð»Ð¾Ð¼Ð° (Ñ€Ð°Ð·Ð±Ð¸Ñ‚Ð¸Ðµ ÑÑ‚ÐµÐºÐ»Ð°)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "ðŸ§ª Test Data Generation",
      "item": [
        {
          "name": "Generate Test Alert - Motion",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"{{device_token}}\",\n  \"pir_motion\": true,\n  \"glass_break\": false,\n  \"door_open\": false,\n  \"panic_button\": false,\n  \"temperature\": 22.5,\n  \"humidity\": 68.3\n}"
            },
            "url": {
              "raw": "{{base_url}}/sensor/data/",
              "host": ["{{base_url}}"],
              "path": ["sensor", "data", ""]
            },
            "description": "Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ñ‚ÐµÑÑ‚Ð¾Ð²ÑƒÑŽ Ñ‚Ñ€ÐµÐ²Ð¾Ð³Ñƒ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°"
          },
          "response": []
        },
        {
          "name": "Generate Test Alert - Panic Emergency",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"{{device_token}}\",\n  \"pir_motion\": false,\n  \"glass_break\": false,\n  \"door_open\": false,\n  \"panic_button\": true,\n  \"temperature\": 23.1,\n  \"humidity\": 65.7\n}"
            },
            "url": {
              "raw": "{{base_url}}/sensor/data/",
              "host": ["{{base_url}}"],
              "path": ["sensor", "data", ""]
            },
            "description": "Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ ÑÐºÑÑ‚Ñ€ÐµÐ½Ð½ÑƒÑŽ Ñ‚Ñ€ÐµÐ²Ð¾Ð³Ñƒ Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ"
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ‚Ð¾ÐºÐµÐ½Ð°",
          "if (pm.request.url.toString().includes('/token/') === false) {",
          "    const accessToken = pm.collectionVariables.get('access_token');",
          "    if (!accessToken) {",
          "        console.log('âš ï¸ No access token found. Please login first.');",
          "    }",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Ð“Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð°Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð²",
          "if (pm.response.code >= 400) {",
          "    console.log('âŒ Error Response:', pm.response.json());",
          "} else if (pm.response.code >= 200 && pm.response.code < 300) {",
          "    console.log('âœ… Request successful');",
          "}"
        ]
      }
    }
  ]
}